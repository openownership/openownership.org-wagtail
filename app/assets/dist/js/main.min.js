/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./_dev/js/components/country-autocomplete.js":
/*!****************************************************!*\
  !*** ./_dev/js/components/country-autocomplete.js ***!
  \****************************************************/
/***/ (function() {

function findMatches(keyword, countries) {
  return countries.filter(country => {
    const regex = new RegExp(keyword, 'gi');
    return country.name.match(regex);
  });
}

// add results to HTML li
function displayMatches() {
  if (countryData) {
    if (this.value.length === 0) {
      suggestions.innerHTML = '';
    } else {
      const matchArray = findMatches(this.value, countryData);
      const html = matchArray.map(country => {
        const regex = new RegExp(this.value, 'gi');
        return `
            <li class="country__suggestions_single-country">
                <a href="${country.url}">${country.name}</a>
            </li>
            `;
      }).join('');
      suggestions.innerHTML = html;
    }
  }
}
const searchInput = document.querySelector('.country-search__input');
const suggestions = document.querySelector('.country__suggestions');
if (searchInput) {
  searchInput.addEventListener('change', displayMatches);
  searchInput.addEventListener('keyup', displayMatches);
}

/***/ }),

/***/ "./_dev/js/components/glossary.js":
/*!****************************************!*\
  !*** ./_dev/js/components/glossary.js ***!
  \****************************************/
/***/ (function() {

const accordionButtons = document.querySelectorAll('.accordion__button');
const accordionSections = document.querySelectorAll('.accordion__section');
accordionSections.forEach(section => {
  section.setAttribute('aria-hidden', true);
  section.classList.remove('open');
});
accordionButtons.forEach(button => {
  button.setAttribute('aria-expanded', false);
  const expanded = button.getAttribute('aria-expanded');
  const number = button.getAttribute('id').split('accordion-open-').pop();
  const associatedSection = document.getElementById(`accordion-section-${number}`);
  button.addEventListener('click', e => {
    e.preventDefault();
    button.classList.toggle('expanded');
    associatedSection.classList.toggle('open');
    if (button.classList.contains('expanded')) {
      button.setAttribute('aria-expanded', true);
      associatedSection.setAttribute('aria-hidden', false);
    } else {
      button.setAttribute('aria-expanded', false);
      associatedSection.setAttribute('aria-hidden', true);
    }
  });
});

/***/ }),

/***/ "./_dev/js/components/map.js":
/*!***********************************!*\
  !*** ./_dev/js/components/map.js ***!
  \***********************************/
/***/ (function() {

/**
 * The global map.
 *
 * This instatiates itself, assuming that the map element is present, along with
 * the variables it requires. See the end of the file, where it checks for their
 * presence before initialising and passing those into worldMap.init().
 *
 * What it expects:
 *
 * geojsonPath - The path to a geojson file for generating the map.
 *
 * mapData - An array of objects, each one about a country, like this:
 *     {
 *       "name": "Djibouti",
 *       "iso2": "DJ",
 *       "url": "/en/map/country/djibouti/",
 *       "lat": "11.6",
 *       "lon": "43.15",
 *       "oo_support": "No engagement",
 *       "committed_central": true,
 *       "committed_public": true,
 *       "implementation_central": false,
 *       "implementation_public": false
 *     }
 *
 * ooEngagedValues - An array of strings. The values we count as OO being
 *   "engaged" with, as used in the oo_support field in mapData objects.
 *
 * A div with the selector defined in mapSelector, below.
 *
 * Assumes d3.js version 7 has been loaded.
 */

// The selector we use to find the element into which we put the map:
const mapSelector = ".js-map";
const worldMap = function () {
  "use strict";

  var publicAPIs = {};

  // Variables that will be set elsewhere inthe code:
  var mapData = {};
  var ooEngagedValues = [];
  var container = null;
  var projection = null;
  var svg = null;
  var width = null;
  var height = null;
  var path = null;
  var tooltip = null;

  /**
   * Call this to initialise everything.
   * @param {object} options Should have:
   *  mapSelector: string, the selector of the element into which we put the map
   *  mapData: array of objects, one per country with OO data.
   *  geojsonPath: path to geojson file to draw the map with.
   */
  publicAPIs.init = function (options) {
    ooEngagedValues = options.ooEngagedValues;
    container = d3.select(options.mapSelector);
    initMapData(options.mapData);
    initMap();
    initTooltip();
    initListeners();
    d3.json(options.geojsonPath).then(function (geojsonData) {
      generateMap(geojsonData);

      // On load we set the initial state by setting this button to be active:
      setActiveButton(document.querySelector(".js-map-filter[data-map-hilites='committed-central|committed-public']"));
    });
  };

  // PRIVATE METHODS

  /**
   * Take the map data array from the back end and transform it into an object
   * keyed by the iso2 values.
   * Sets the mapData object.
   * @param {array} data
   */
  var initMapData = function (data) {
    mapData = data;
    for (var i = 0; i < data.length; i++) {
      var country = data[i];
      mapData[country.iso2] = country;
    }
  };

  /**
   * Set up the basic elements and projection etc.
   */
  var initMap = function () {
    width = parseInt(container.style("width"), 10);
    height = parseInt(container.style("height"), 10);
    svg = container.append("svg").attr("preserveAspectRatio", "xMinYMin meet").attr("viewBox", "0 0 " + width + " " + height);
    projection = d3.geoMercator().translate([width / 2, height / 2]).scale(100).center([0, 40]);
    path = d3.geoPath().projection(projection);
  };

  /**
    * Create the tooltip element if it doesn't already exist.
    */
  var initTooltip = function () {
    if (document.getElementsByClassName("js-map-tooltip").length == 0) {
      tooltip = d3.select("body").append("div").classed("map__tooltip js-map-tooltip", true);
    } else {
      tooltip = d3.select(".js-map-tooltip");
    }
  };

  /**
   * Listen for clicks on the buttons that hilite certain countries.
   *
   * Each one should have the "js-map-filter" class.
   * And an attribute like:
   *  data-map-hilites="committed-central|committed-public"
   */
  var initListeners = function () {
    document.addEventListener('click', function (event) {
      // Is it a click on one of the buttons:
      if (event.target.matches('.js-map-filter')) {
        setActiveButton(event.target);
        event.preventDefault();
      }
    });

    // Just clicking on the background removes any existing hiliting.
    svg.on("click", function (event, d) {
      setActiveButton();
    });
  };

  /**
   * Set which button is now active, and change map hilites accordingly.
   * @param {object} btnEl The element whose parent is to be active. Or null if none of them should be.
   */
  var setActiveButton = function (btnEl) {
    document.querySelectorAll(".map__country-data-box").forEach(function (el) {
      el.classList.remove("--active");
    });
    if (btnEl) {
      var parentContainer = btnEl.parentElement;
      parentContainer.classList.add("--active");

      // Get what to filter:
      var filters = btnEl.getAttribute("data-map-hilites");
      hiliteCountries(filters.split("|"));
    } else {
      hiliteCountries([]);
    }
  };

  /**
   * Draw the map using supplied data.
   * @param {object} geojsonData
   */
  var generateMap = function (geojsonData) {
    ///////////////////////////////////////////////////////
    // ADD COUNTRIES

    svg.selectAll("path").data(geojsonData.features).enter().append("path").attr("class", function (d) {
      var cls = ' js-map-country';
      if (getCountryProp(d, 'committed_central')) {
        cls += ' js-map-committed-central';
      }
      if (getCountryProp(d, 'committed_public')) {
        cls += ' js-map-committed-public';
      }
      if (getCountryProp(d, 'implementation_central')) {
        cls += ' js-map-implementation-central';
      }
      if (getCountryProp(d, 'implementation_public')) {
        cls += ' js-map-implementation-public';
      }

      // if (ooEngagedValues.indexOf(getCountryProp(d, 'oo_support')) > -1) {
      //   cls += ' map-engaged';
      // }

      return cls;
    }).attr("d", path).on("click", onClick).on("mouseover", onMouseover).on("mousemove", onMousemove).on("mouseout", onMouseout).on("zoom", zoom);

    ///////////////////////////////////////////////////////
    // ADD CIRCLES

    // Get the lat/lon of every country that has them, to show a circle in each
    // country where OO has a presence.
    var circles = [];
    for (var iso in mapData) {
      if (mapData[iso].lon) {
        if (ooEngagedValues.indexOf(mapData[iso].oo_support) > -1) {
          circles.push(projection([parseFloat(mapData[iso].lon), parseFloat(mapData[iso].lat)]));
        }
      }
    }
    svg.selectAll("circle").data(circles).enter().append("circle").attr("class", "map__circle").attr("cx", function (d) {
      return d[0];
    }).attr("cy", function (d) {
      return d[1];
    }).attr("r", "3px");

    ///////////////////////////////////////////////////////
    // ENABLE ZOOM

    var zoom = d3.zoom().scaleExtent([1, 5]).on("zoom", function (event) {
      svg.selectAll("path").attr("transform", event.transform);
      svg.selectAll("circle").attr("transform", event.transform);
    });
    svg.call(zoom);
    function onZoomClick(zoomLevel) {
      svg.transition().delay(50).duration(300).call(zoom.scaleBy, zoomLevel);
    }
    d3.selectAll('.js-map-zoomin').on('click', function () {
      onZoomClick(1.5);
    });
    d3.selectAll('.js-map-zoomout').on('click', function () {
      onZoomClick(0.5);
    });
  };

  /**
   * When a country has been clicked, this is called.
   * @param {object} event The event.
   * @param {object} d The country object.
   */
  var onClick = function (event, d) {
    var url = getCountryProp(d, "url");
    if (url) {
      window.location = url;
    }
  };

  /**
  * Cursor has entered a country - show the tooltip.
  * @param {object} event The event.
  * @param {object} d The country object.
  */
  var onMouseover = function (event, d) {
    let html = tooltipFormat(d);
    if (html) {
      tooltip.html(html);
      tooltip.style("visibility", "visible");
    }
  };

  /**
   * Position the tooltip in relation to cursor.
   * @param {object} event The event.
   * @param {object} d The country object.
   */
  var onMousemove = function (event, d) {
    var tooltipRect = d3.select(".js-map-tooltip").node().getBoundingClientRect();
    var tooltipHeight = tooltipRect.height;
    var tooltipWidth = tooltipRect.width;

    // Position above the cursor:
    tooltip.style("top", event.pageY - (tooltipHeight + 7) + "px").style("left", event.pageX - tooltipWidth / 2 + "px");
  };

  /**
   * The cursor has left a country - hide the tooltip.
   * @param {object} event The event.
   * @param {object} d The country object.
   */
  var onMouseout = function (event, d) {
    tooltip.style("visibility", "hidden");
  };

  /**
   * Set the content of the tooltip.
   * @param {object} d The country object.
   * @returns string HTML for the tooltip.
   */
  var tooltipFormat = function (d) {
    let name = getCountryProp(d, "name");
    let html = '';
    if (name) {
      html = "<strong>" + getCountryProp(d, "name") + "</strong>";
    }
    // text += "<br>Committed central: " + getCountryProp(d, "committed_central");
    // text += "<br>Committed public: " + getCountryProp(d, "committed_public");
    // text += "<br>Implementation central: " + getCountryProp(d, "implementation_central");
    // text += "<br>Implementation public: " + getCountryProp(d, "implementation_public");
    return html;
  };

  /**
   * Get a property about a country from its path element.
   *
   * We use the data that's passed in from the back end, that's now in
   * the mapData object. We need the two-letter ISO value from the d3 element
   * to find the right data in the mapData object.
   *
   * @param {object} d The d3 element that's been clicked, hovered over, etc.
   * @param {string} key The name of a piece of info like 'name', 'url', implementation_central', etc.
   * @returns string
   */
  var getCountryProp = function (d, key) {
    let iso = d.properties.iso_a2;
    if (iso in mapData) {
      if (key in mapData[iso]) {
        return mapData[iso][key];
      } else {
        console.error("No '" + key + "' property found in mapData for ISO '" + iso + "'");
      }
    } else {
      console.error("No iso_a2 value found for " + d.properties.name + " when looking for " + key);
    }
    return '';
  };

  /**
   * Add classes to countries based on whether they've committed/implemented.
   *
   * @param {array} kinds An array of strings like
   *  ["committed-central", "committed-public"]
   *  If it's an empty array then all hilite classes will be removed.
   */
  var hiliteCountries = function (kinds) {
    // Turn off any existing hiliting:
    d3.selectAll(".js-map-country.map__hilite-central").classed("map__hilite-central", false);
    d3.selectAll(".js-map-country.map__hilite-public").classed("map__hilite-public", false);

    // Hilite this kind of country:
    for (var i = 0; i < kinds.length; i++) {
      var clss = "map__hilite-central";
      if (kinds[i].endsWith("public")) {
        clss = "map__hilite-public";
      }
      d3.selectAll(".js-map-" + kinds[i]).classed(clss, true);
    }
  };
  return publicAPIs;
}();

// Ensure we have everything required before initialising:
if (typeof d3 !== 'undefined' && typeof geojsonPath !== 'undefined' && typeof mapData !== 'undefined' && typeof ooEngagedValues !== 'undefined' && document.querySelectorAll(mapSelector).length) {
  worldMap.init({
    mapSelector: mapSelector,
    mapData: mapData,
    geojsonPath: geojsonPath,
    ooEngagedValues: ooEngagedValues
  });
}

/***/ }),

/***/ "./_dev/js/components/navigation.js":
/*!******************************************!*\
  !*** ./_dev/js/components/navigation.js ***!
  \******************************************/
/***/ (function() {

var secondaryLevelButtons = document.querySelectorAll('.--level-two');
secondaryLevelButtons.forEach(function (button) {
  button.addEventListener('click', function () {
    let submenu = button.nextElementSibling;
    var parentLi = button.parentElement;
    if (submenu.classList.contains('subnav--hidden')) {
      this.setAttribute('aria-expanded', 'true');
      this.classList.add('expanded');
      submenu.classList.remove('subnav--hidden');
      parentLi.classList.add('expanded');
    } else {
      submenu.classList.add('subnav--hidden');
      parentLi.classList.remove('expanded');
      this.classList.remove('expanded');
      this.setAttribute('aria-expanded', 'false');
    }
  });
});
var firstLevelButtons = document.querySelectorAll('.--level-one');
firstLevelButtons.forEach(function (button) {
  button.addEventListener('click', function () {
    let submenu = button.nextElementSibling;
    var parentLi = button.parentElement;
    if (submenu.classList.contains('subnav--hidden')) {
      this.setAttribute('aria-expanded', 'true');
      this.classList.add('expanded');
      submenu.classList.remove('subnav--hidden');
      parentLi.classList.add('expanded');
    } else {
      submenu.classList.add('subnav--hidden');
      parentLi.classList.remove('expanded');
      this.classList.remove('expanded');
      this.setAttribute('aria-expanded', 'false');
    }
  });
});
var mobileToggle = document.querySelector('.navigation__toggle');
mobileToggle.addEventListener('click', function () {
  let mainMenu = this.nextElementSibling;
  if (mainMenu.classList.contains('--hidden')) {
    this.setAttribute('aria-expanded', 'true');
    this.classList.add('expanded');
    mainMenu.classList.remove('--hidden');
  } else {
    mainMenu.classList.add('--hidden');
    this.classList.remove('expanded');
    this.setAttribute('aria-expanded', 'false');
  }
});

/***/ }),

/***/ "./_dev/js/components/report-contents-button.js":
/*!******************************************************!*\
  !*** ./_dev/js/components/report-contents-button.js ***!
  \******************************************************/
/***/ (function() {

var reportContentsButton = document.getElementById('report-contents');
if (reportContentsButton) {
  var leftMenu = document.getElementById('page-menu');
  reportContentsButton.addEventListener('click', e => {
    e.preventDefault();
    reportContentsButton.classList.toggle('expanded');
    leftMenu.classList.toggle('show');
    if (reportContentsButton.classList.contains('expanded')) {
      reportContentsButton.setAttribute('aria-expanded', true);
    } else {
      reportContentsButton.setAttribute('aria-expanded', false);
    }
  });
}

/***/ }),

/***/ "./_dev/js/components/share-page.js":
/*!******************************************!*\
  !*** ./_dev/js/components/share-page.js ***!
  \******************************************/
/***/ (function() {

var sharePageButton = document.getElementById('share-page');
var sharePageLinks = document.getElementById('share-page-links');
if (sharePageButton) {
  sharePageButton.addEventListener('click', e => {
    e.preventDefault();
    sharePageButton.classList.toggle('expanded');
    sharePageLinks.classList.toggle('collapsed');
    if (sharePageButton.classList.contains('expanded')) {
      sharePageButton.setAttribute('aria-expanded', true);
    } else {
      sharePageButton.setAttribute('aria-expanded', false);
    }
  });
}

/***/ }),

/***/ "./_dev/css/main.css":
/*!***************************!*\
  !*** ./_dev/css/main.css ***!
  \***************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
!function() {
"use strict";
/*!*************************!*\
  !*** ./_dev/js/main.js ***!
  \*************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _css_main_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/main.css */ "./_dev/css/main.css");
/* harmony import */ var _components_share_page_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/share-page.js */ "./_dev/js/components/share-page.js");
/* harmony import */ var _components_share_page_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_components_share_page_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _components_glossary_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/glossary.js */ "./_dev/js/components/glossary.js");
/* harmony import */ var _components_glossary_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_components_glossary_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _components_navigation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/navigation.js */ "./_dev/js/components/navigation.js");
/* harmony import */ var _components_navigation_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_components_navigation_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _components_map_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/map.js */ "./_dev/js/components/map.js");
/* harmony import */ var _components_map_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_components_map_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _components_country_autocomplete_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/country-autocomplete.js */ "./_dev/js/components/country-autocomplete.js");
/* harmony import */ var _components_country_autocomplete_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_components_country_autocomplete_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _components_report_contents_button_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/report-contents-button.js */ "./_dev/js/components/report-contents-button.js");
/* harmony import */ var _components_report_contents_button_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_components_report_contents_button_js__WEBPACK_IMPORTED_MODULE_6__);
/*------------------------------------*\
  #CSS
\*------------------------------------*/


document.querySelector('html').classList.remove('no-js');






}();
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxlQUFlLEVBQUUsSUFBSSxDQUFDO0lBRXZELENBQUMsTUFBTTtNQUNIeUgsZUFBZSxDQUFDekgsWUFBWSxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUM7SUFFeEQ7RUFDSixDQUFDLENBQUM7QUFDTjs7Ozs7Ozs7Ozs7O0FDbkJBOzs7Ozs7O1VDQUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0EsZUFBZSw0QkFBNEI7V0FDM0MsZUFBZTtXQUNmLGlDQUFpQyxXQUFXO1dBQzVDO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQSw4Q0FBOEM7Ozs7O1dDQTlDO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ05BO0FBQ0E7QUFDQTs7QUFFeUI7QUFFekJSLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDUSxTQUFTLENBQUNDLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFFcEI7QUFDRjtBQUNFO0FBRVA7QUFFaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC8uL19kZXYvanMvY29tcG9uZW50cy9jb3VudHJ5LWF1dG9jb21wbGV0ZS5qcyIsIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC8uL19kZXYvanMvY29tcG9uZW50cy9nbG9zc2FyeS5qcyIsIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC8uL19kZXYvanMvY29tcG9uZW50cy9tYXAuanMiLCJ3ZWJwYWNrOi8vT3BlbiBPd25lcnNoaXAvLi9fZGV2L2pzL2NvbXBvbmVudHMvbmF2aWdhdGlvbi5qcyIsIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC8uL19kZXYvanMvY29tcG9uZW50cy9yZXBvcnQtY29udGVudHMtYnV0dG9uLmpzIiwid2VicGFjazovL09wZW4gT3duZXJzaGlwLy4vX2Rldi9qcy9jb21wb25lbnRzL3NoYXJlLXBhZ2UuanMiLCJ3ZWJwYWNrOi8vT3BlbiBPd25lcnNoaXAvLi9fZGV2L2Nzcy9tYWluLmNzcyIsIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vT3BlbiBPd25lcnNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9PcGVuIE93bmVyc2hpcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL09wZW4gT3duZXJzaGlwLy4vX2Rldi9qcy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZpbmRNYXRjaGVzKGtleXdvcmQsIGNvdW50cmllcykge1xuICByZXR1cm4gY291bnRyaWVzLmZpbHRlcihjb3VudHJ5ID0+IHtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoa2V5d29yZCwgJ2dpJyk7XG4gICAgcmV0dXJuIGNvdW50cnkubmFtZS5tYXRjaChyZWdleClcbiAgfSk7XG59XG5cbi8vIGFkZCByZXN1bHRzIHRvIEhUTUwgbGlcbmZ1bmN0aW9uIGRpc3BsYXlNYXRjaGVzKCkge1xuICAgIGlmIChjb3VudHJ5RGF0YSkge1xuXG4gICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc3VnZ2VzdGlvbnMuaW5uZXJIVE1MID0gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBtYXRjaEFycmF5ID0gZmluZE1hdGNoZXModGhpcy52YWx1ZSwgY291bnRyeURhdGEpXG4gICAgICAgIGNvbnN0IGh0bWwgPSBtYXRjaEFycmF5Lm1hcChjb3VudHJ5ID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHRoaXMudmFsdWUsICdnaScpO1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cImNvdW50cnlfX3N1Z2dlc3Rpb25zX3NpbmdsZS1jb3VudHJ5XCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7Y291bnRyeS51cmx9XCI+JHtjb3VudHJ5Lm5hbWV9PC9hPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgICAgICBcbiAgICAgICAgc3VnZ2VzdGlvbnMuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvdW50cnktc2VhcmNoX19pbnB1dCcpO1xuY29uc3Qgc3VnZ2VzdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY291bnRyeV9fc3VnZ2VzdGlvbnMnKTtcblxuaWYgKHNlYXJjaElucHV0KSB7XG4gIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGRpc3BsYXlNYXRjaGVzKTtcbiAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBkaXNwbGF5TWF0Y2hlcyk7XG59XG5cblxuIiwiY29uc3QgYWNjb3JkaW9uQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2NvcmRpb25fX2J1dHRvbicpO1xuY29uc3QgYWNjb3JkaW9uU2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkaW9uX19zZWN0aW9uJyk7XG5cbmFjY29yZGlvblNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiAge1xuICBzZWN0aW9uLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKVxuICBzZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKVxufSlcblxuYWNjb3JkaW9uQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG4gIFxuICBjb25zdCBleHBhbmRlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgY29uc3QgbnVtYmVyID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnaWQnKS5zcGxpdCgnYWNjb3JkaW9uLW9wZW4tJykucG9wKCk7XG4gIGNvbnN0IGFzc29jaWF0ZWRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGFjY29yZGlvbi1zZWN0aW9uLSR7bnVtYmVyfWApXG4gXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdleHBhbmRlZCcpO1xuICAgIGFzc29jaWF0ZWRTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuICAgICAgYXNzb2NpYXRlZFNlY3Rpb24uc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgIGFzc29jaWF0ZWRTZWN0aW9uLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTtcbiAgICB9XG4gIH0pXG59KVxuXG4iLCIvKipcbiAqIFRoZSBnbG9iYWwgbWFwLlxuICpcbiAqIFRoaXMgaW5zdGF0aWF0ZXMgaXRzZWxmLCBhc3N1bWluZyB0aGF0IHRoZSBtYXAgZWxlbWVudCBpcyBwcmVzZW50LCBhbG9uZyB3aXRoXG4gKiB0aGUgdmFyaWFibGVzIGl0IHJlcXVpcmVzLiBTZWUgdGhlIGVuZCBvZiB0aGUgZmlsZSwgd2hlcmUgaXQgY2hlY2tzIGZvciB0aGVpclxuICogcHJlc2VuY2UgYmVmb3JlIGluaXRpYWxpc2luZyBhbmQgcGFzc2luZyB0aG9zZSBpbnRvIHdvcmxkTWFwLmluaXQoKS5cbiAqXG4gKiBXaGF0IGl0IGV4cGVjdHM6XG4gKlxuICogZ2VvanNvblBhdGggLSBUaGUgcGF0aCB0byBhIGdlb2pzb24gZmlsZSBmb3IgZ2VuZXJhdGluZyB0aGUgbWFwLlxuICpcbiAqIG1hcERhdGEgLSBBbiBhcnJheSBvZiBvYmplY3RzLCBlYWNoIG9uZSBhYm91dCBhIGNvdW50cnksIGxpa2UgdGhpczpcbiAqICAgICB7XG4gKiAgICAgICBcIm5hbWVcIjogXCJEamlib3V0aVwiLFxuICogICAgICAgXCJpc28yXCI6IFwiREpcIixcbiAqICAgICAgIFwidXJsXCI6IFwiL2VuL21hcC9jb3VudHJ5L2RqaWJvdXRpL1wiLFxuICogICAgICAgXCJsYXRcIjogXCIxMS42XCIsXG4gKiAgICAgICBcImxvblwiOiBcIjQzLjE1XCIsXG4gKiAgICAgICBcIm9vX3N1cHBvcnRcIjogXCJObyBlbmdhZ2VtZW50XCIsXG4gKiAgICAgICBcImNvbW1pdHRlZF9jZW50cmFsXCI6IHRydWUsXG4gKiAgICAgICBcImNvbW1pdHRlZF9wdWJsaWNcIjogdHJ1ZSxcbiAqICAgICAgIFwiaW1wbGVtZW50YXRpb25fY2VudHJhbFwiOiBmYWxzZSxcbiAqICAgICAgIFwiaW1wbGVtZW50YXRpb25fcHVibGljXCI6IGZhbHNlXG4gKiAgICAgfVxuICpcbiAqIG9vRW5nYWdlZFZhbHVlcyAtIEFuIGFycmF5IG9mIHN0cmluZ3MuIFRoZSB2YWx1ZXMgd2UgY291bnQgYXMgT08gYmVpbmdcbiAqICAgXCJlbmdhZ2VkXCIgd2l0aCwgYXMgdXNlZCBpbiB0aGUgb29fc3VwcG9ydCBmaWVsZCBpbiBtYXBEYXRhIG9iamVjdHMuXG4gKlxuICogQSBkaXYgd2l0aCB0aGUgc2VsZWN0b3IgZGVmaW5lZCBpbiBtYXBTZWxlY3RvciwgYmVsb3cuXG4gKlxuICogQXNzdW1lcyBkMy5qcyB2ZXJzaW9uIDcgaGFzIGJlZW4gbG9hZGVkLlxuICovXG5cblxuLy8gVGhlIHNlbGVjdG9yIHdlIHVzZSB0byBmaW5kIHRoZSBlbGVtZW50IGludG8gd2hpY2ggd2UgcHV0IHRoZSBtYXA6XG5jb25zdCBtYXBTZWxlY3RvciA9IFwiLmpzLW1hcFwiO1xuXG5jb25zdCB3b3JsZE1hcCA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwdWJsaWNBUElzID0ge307XG5cbiAgLy8gVmFyaWFibGVzIHRoYXQgd2lsbCBiZSBzZXQgZWxzZXdoZXJlIGludGhlIGNvZGU6XG4gIHZhciBtYXBEYXRhID0ge307XG4gIHZhciBvb0VuZ2FnZWRWYWx1ZXMgPSBbXTtcbiAgdmFyIGNvbnRhaW5lciA9IG51bGw7XG4gIHZhciBwcm9qZWN0aW9uID0gbnVsbDtcbiAgdmFyIHN2ZyA9IG51bGw7XG4gIHZhciB3aWR0aCA9IG51bGw7XG4gIHZhciBoZWlnaHQgPSBudWxsO1xuICB2YXIgcGF0aCA9IG51bGw7XG4gIHZhciB0b29sdGlwID0gbnVsbDtcblxuICAvKipcbiAgICogQ2FsbCB0aGlzIHRvIGluaXRpYWxpc2UgZXZlcnl0aGluZy5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgU2hvdWxkIGhhdmU6XG4gICAqICBtYXBTZWxlY3Rvcjogc3RyaW5nLCB0aGUgc2VsZWN0b3Igb2YgdGhlIGVsZW1lbnQgaW50byB3aGljaCB3ZSBwdXQgdGhlIG1hcFxuICAgKiAgbWFwRGF0YTogYXJyYXkgb2Ygb2JqZWN0cywgb25lIHBlciBjb3VudHJ5IHdpdGggT08gZGF0YS5cbiAgICogIGdlb2pzb25QYXRoOiBwYXRoIHRvIGdlb2pzb24gZmlsZSB0byBkcmF3IHRoZSBtYXAgd2l0aC5cbiAgICovXG4gIHB1YmxpY0FQSXMuaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cbiAgICBvb0VuZ2FnZWRWYWx1ZXMgPSBvcHRpb25zLm9vRW5nYWdlZFZhbHVlcztcblxuICAgIGNvbnRhaW5lciA9IGQzLnNlbGVjdChvcHRpb25zLm1hcFNlbGVjdG9yKTtcblxuICAgIGluaXRNYXBEYXRhKG9wdGlvbnMubWFwRGF0YSk7XG4gICAgaW5pdE1hcCgpO1xuICAgIGluaXRUb29sdGlwKCk7XG4gICAgaW5pdExpc3RlbmVycygpO1xuXG4gICAgZDMuanNvbihvcHRpb25zLmdlb2pzb25QYXRoKS50aGVuKGZ1bmN0aW9uIChnZW9qc29uRGF0YSkge1xuICAgICAgZ2VuZXJhdGVNYXAoZ2VvanNvbkRhdGEpO1xuXG4gICAgICAvLyBPbiBsb2FkIHdlIHNldCB0aGUgaW5pdGlhbCBzdGF0ZSBieSBzZXR0aW5nIHRoaXMgYnV0dG9uIHRvIGJlIGFjdGl2ZTpcbiAgICAgIHNldEFjdGl2ZUJ1dHRvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBcIi5qcy1tYXAtZmlsdGVyW2RhdGEtbWFwLWhpbGl0ZXM9J2NvbW1pdHRlZC1jZW50cmFsfGNvbW1pdHRlZC1wdWJsaWMnXVwiXG4gICAgICApKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBQUklWQVRFIE1FVEhPRFNcblxuICAvKipcbiAgICogVGFrZSB0aGUgbWFwIGRhdGEgYXJyYXkgZnJvbSB0aGUgYmFjayBlbmQgYW5kIHRyYW5zZm9ybSBpdCBpbnRvIGFuIG9iamVjdFxuICAgKiBrZXllZCBieSB0aGUgaXNvMiB2YWx1ZXMuXG4gICAqIFNldHMgdGhlIG1hcERhdGEgb2JqZWN0LlxuICAgKiBAcGFyYW0ge2FycmF5fSBkYXRhXG4gICAqL1xuICB2YXIgaW5pdE1hcERhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgbWFwRGF0YSA9IGRhdGE7XG4gICAgZm9yICh2YXIgaT0wOyBpIDxkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY291bnRyeSA9IGRhdGFbaV07XG4gICAgICBtYXBEYXRhW2NvdW50cnkuaXNvMl0gPSBjb3VudHJ5O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdXAgdGhlIGJhc2ljIGVsZW1lbnRzIGFuZCBwcm9qZWN0aW9uIGV0Yy5cbiAgICovXG4gIHZhciBpbml0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgIHdpZHRoID0gcGFyc2VJbnQoY29udGFpbmVyLnN0eWxlKFwid2lkdGhcIiksIDEwKTtcbiAgICBoZWlnaHQgPSBwYXJzZUludChjb250YWluZXIuc3R5bGUoXCJoZWlnaHRcIiksIDEwKTtcblxuICAgIHN2ZyA9IGNvbnRhaW5lclxuICAgICAgLmFwcGVuZChcInN2Z1wiKVxuICAgICAgLmF0dHIoXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwieE1pbllNaW4gbWVldFwiKVxuICAgICAgLmF0dHIoXCJ2aWV3Qm94XCIsIFwiMCAwIFwiICsgd2lkdGggKyBcIiBcIiArIGhlaWdodCk7XG5cbiAgICBwcm9qZWN0aW9uID0gZDNcbiAgICAgIC5nZW9NZXJjYXRvcigpXG4gICAgICAudHJhbnNsYXRlKFt3aWR0aCAvIDIsIGhlaWdodCAvIDJdKVxuICAgICAgLnNjYWxlKDEwMClcbiAgICAgIC5jZW50ZXIoWzAsIDQwXSk7XG5cbiAgICBwYXRoID0gZDMuZ2VvUGF0aCgpLnByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAgKiBDcmVhdGUgdGhlIHRvb2x0aXAgZWxlbWVudCBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3QuXG4gICAgKi9cbiAgIHZhciBpbml0VG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImpzLW1hcC10b29sdGlwXCIpLmxlbmd0aCA9PSAwKSB7XG4gICAgICB0b29sdGlwID0gZDNcbiAgICAgICAgLnNlbGVjdChcImJvZHlcIilcbiAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuY2xhc3NlZChcIm1hcF9fdG9vbHRpcCBqcy1tYXAtdG9vbHRpcFwiLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9vbHRpcCA9IGQzLnNlbGVjdChcIi5qcy1tYXAtdG9vbHRpcFwiKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RlbiBmb3IgY2xpY2tzIG9uIHRoZSBidXR0b25zIHRoYXQgaGlsaXRlIGNlcnRhaW4gY291bnRyaWVzLlxuICAgKlxuICAgKiBFYWNoIG9uZSBzaG91bGQgaGF2ZSB0aGUgXCJqcy1tYXAtZmlsdGVyXCIgY2xhc3MuXG4gICAqIEFuZCBhbiBhdHRyaWJ1dGUgbGlrZTpcbiAgICogIGRhdGEtbWFwLWhpbGl0ZXM9XCJjb21taXR0ZWQtY2VudHJhbHxjb21taXR0ZWQtcHVibGljXCJcbiAgICovXG4gIHZhciBpbml0TGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIC8vIElzIGl0IGEgY2xpY2sgb24gb25lIG9mIHRoZSBidXR0b25zOlxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuanMtbWFwLWZpbHRlcicpKSB7XG4gICAgICAgIHNldEFjdGl2ZUJ1dHRvbihldmVudC50YXJnZXQpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSnVzdCBjbGlja2luZyBvbiB0aGUgYmFja2dyb3VuZCByZW1vdmVzIGFueSBleGlzdGluZyBoaWxpdGluZy5cbiAgICBzdmcub24oXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCwgZCkge1xuICAgICAgc2V0QWN0aXZlQnV0dG9uKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB3aGljaCBidXR0b24gaXMgbm93IGFjdGl2ZSwgYW5kIGNoYW5nZSBtYXAgaGlsaXRlcyBhY2NvcmRpbmdseS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGJ0bkVsIFRoZSBlbGVtZW50IHdob3NlIHBhcmVudCBpcyB0byBiZSBhY3RpdmUuIE9yIG51bGwgaWYgbm9uZSBvZiB0aGVtIHNob3VsZCBiZS5cbiAgICovXG4gIHZhciBzZXRBY3RpdmVCdXR0b24gPSBmdW5jdGlvbiAoYnRuRWwpIHtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWFwX19jb3VudHJ5LWRhdGEtYm94XCIpLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCItLWFjdGl2ZVwiKTtcbiAgICB9KTtcblxuICAgIGlmIChidG5FbCkge1xuICAgICAgdmFyIHBhcmVudENvbnRhaW5lciA9IGJ0bkVsLnBhcmVudEVsZW1lbnQ7XG4gICAgICBwYXJlbnRDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIi0tYWN0aXZlXCIpO1xuXG4gICAgICAvLyBHZXQgd2hhdCB0byBmaWx0ZXI6XG4gICAgICB2YXIgZmlsdGVycyA9IGJ0bkVsLmdldEF0dHJpYnV0ZShcImRhdGEtbWFwLWhpbGl0ZXNcIik7XG4gICAgICBoaWxpdGVDb3VudHJpZXMoZmlsdGVycy5zcGxpdChcInxcIikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWxpdGVDb3VudHJpZXMoW10pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IHRoZSBtYXAgdXNpbmcgc3VwcGxpZWQgZGF0YS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGdlb2pzb25EYXRhXG4gICAqL1xuICB2YXIgZ2VuZXJhdGVNYXAgPSBmdW5jdGlvbiAoZ2VvanNvbkRhdGEpIHtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBBREQgQ09VTlRSSUVTXG5cbiAgICBzdmdcbiAgICAgIC5zZWxlY3RBbGwoXCJwYXRoXCIpXG4gICAgICAuZGF0YShnZW9qc29uRGF0YS5mZWF0dXJlcylcbiAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoXCJwYXRoXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBjbHMgPSAnIGpzLW1hcC1jb3VudHJ5JztcbiAgICAgICAgICBpZiAoZ2V0Q291bnRyeVByb3AoZCwgJ2NvbW1pdHRlZF9jZW50cmFsJykpIHtcbiAgICAgICAgICAgIGNscyArPSAnIGpzLW1hcC1jb21taXR0ZWQtY2VudHJhbCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnZXRDb3VudHJ5UHJvcChkLCAnY29tbWl0dGVkX3B1YmxpYycpKSB7XG4gICAgICAgICAgICBjbHMgKz0gJyBqcy1tYXAtY29tbWl0dGVkLXB1YmxpYyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnZXRDb3VudHJ5UHJvcChkLCAnaW1wbGVtZW50YXRpb25fY2VudHJhbCcpKSB7XG4gICAgICAgICAgICBjbHMgKz0gJyBqcy1tYXAtaW1wbGVtZW50YXRpb24tY2VudHJhbCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnZXRDb3VudHJ5UHJvcChkLCAnaW1wbGVtZW50YXRpb25fcHVibGljJykpIHtcbiAgICAgICAgICAgIGNscyArPSAnIGpzLW1hcC1pbXBsZW1lbnRhdGlvbi1wdWJsaWMnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIChvb0VuZ2FnZWRWYWx1ZXMuaW5kZXhPZihnZXRDb3VudHJ5UHJvcChkLCAnb29fc3VwcG9ydCcpKSA+IC0xKSB7XG4gICAgICAgICAgLy8gICBjbHMgKz0gJyBtYXAtZW5nYWdlZCc7XG4gICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgcmV0dXJuIGNscztcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpXG4gICAgICAgICAgLm9uKFwiY2xpY2tcIiwgb25DbGljaylcbiAgICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgb25Nb3VzZW92ZXIpXG4gICAgICAgICAgLm9uKFwibW91c2Vtb3ZlXCIsIG9uTW91c2Vtb3ZlKVxuICAgICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIG9uTW91c2VvdXQpXG4gICAgICAgICAgLm9uKFwiem9vbVwiLCB6b29tKTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBBREQgQ0lSQ0xFU1xuXG4gICAgLy8gR2V0IHRoZSBsYXQvbG9uIG9mIGV2ZXJ5IGNvdW50cnkgdGhhdCBoYXMgdGhlbSwgdG8gc2hvdyBhIGNpcmNsZSBpbiBlYWNoXG4gICAgLy8gY291bnRyeSB3aGVyZSBPTyBoYXMgYSBwcmVzZW5jZS5cbiAgICB2YXIgY2lyY2xlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaXNvIGluIG1hcERhdGEpIHtcbiAgICAgIGlmIChtYXBEYXRhW2lzb10ubG9uKSB7XG4gICAgICAgIGlmIChvb0VuZ2FnZWRWYWx1ZXMuaW5kZXhPZihtYXBEYXRhW2lzb10ub29fc3VwcG9ydCkgPiAtMSkge1xuICAgICAgICAgIGNpcmNsZXMucHVzaChwcm9qZWN0aW9uKFtcbiAgICAgICAgICAgIHBhcnNlRmxvYXQobWFwRGF0YVtpc29dLmxvbiksXG4gICAgICAgICAgICBwYXJzZUZsb2F0KG1hcERhdGFbaXNvXS5sYXQpXG4gICAgICAgICAgXSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdmdcbiAgICAgIC5zZWxlY3RBbGwoXCJjaXJjbGVcIilcbiAgICAgIC5kYXRhKGNpcmNsZXMpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm1hcF9fY2lyY2xlXCIpXG4gICAgICAuYXR0cihcImN4XCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkWzBdOyB9KVxuICAgICAgLmF0dHIoXCJjeVwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZFsxXTsgfSlcbiAgICAgIC5hdHRyKFwiclwiLCBcIjNweFwiKTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBFTkFCTEUgWk9PTVxuXG4gICAgdmFyIHpvb20gPSBkM1xuICAgICAgLnpvb20oKVxuICAgICAgLnNjYWxlRXh0ZW50KFsxLCA1XSlcbiAgICAgIC5vbihcInpvb21cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHN2Zy5zZWxlY3RBbGwoXCJwYXRoXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZXZlbnQudHJhbnNmb3JtKTtcbiAgICAgICAgc3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGV2ZW50LnRyYW5zZm9ybSk7XG4gICAgICB9KTtcblxuICAgIHN2Zy5jYWxsKHpvb20pO1xuXG4gICAgZnVuY3Rpb24gb25ab29tQ2xpY2soem9vbUxldmVsKSB7XG4gICAgICBzdmcudHJhbnNpdGlvbigpXG4gICAgICAgIC5kZWxheSg1MClcbiAgICAgICAgLmR1cmF0aW9uKDMwMClcbiAgICAgICAgLmNhbGwoem9vbS5zY2FsZUJ5LCB6b29tTGV2ZWwpO1xuICAgIH1cblxuICAgIGQzLnNlbGVjdEFsbCgnLmpzLW1hcC16b29taW4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIG9uWm9vbUNsaWNrKDEuNSk7XG4gICAgfSk7XG4gICAgZDMuc2VsZWN0QWxsKCcuanMtbWFwLXpvb21vdXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIG9uWm9vbUNsaWNrKDAuNSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gYSBjb3VudHJ5IGhhcyBiZWVuIGNsaWNrZWQsIHRoaXMgaXMgY2FsbGVkLlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gZCBUaGUgY291bnRyeSBvYmplY3QuXG4gICAqL1xuICB2YXIgb25DbGljayA9IGZ1bmN0aW9uIChldmVudCwgZCkge1xuICAgIHZhciB1cmwgPSBnZXRDb3VudHJ5UHJvcChkLCBcInVybFwiKTtcbiAgICBpZiAodXJsKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XG4gICAgfVxuICB9O1xuXG4gICAgLyoqXG4gICAgKiBDdXJzb3IgaGFzIGVudGVyZWQgYSBjb3VudHJ5IC0gc2hvdyB0aGUgdG9vbHRpcC5cbiAgICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUaGUgZXZlbnQuXG4gICAgKiBAcGFyYW0ge29iamVjdH0gZCBUaGUgY291bnRyeSBvYmplY3QuXG4gICAgKi9cbiAgICAgdmFyIG9uTW91c2VvdmVyID0gZnVuY3Rpb24gKGV2ZW50LCBkKSB7XG4gICAgICBsZXQgaHRtbCA9IHRvb2x0aXBGb3JtYXQoZCk7XG4gICAgICBpZiAoaHRtbCkge1xuICAgICAgICB0b29sdGlwLmh0bWwoaHRtbCk7XG4gICAgICAgIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUG9zaXRpb24gdGhlIHRvb2x0aXAgaW4gcmVsYXRpb24gdG8gY3Vyc29yLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUaGUgZXZlbnQuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGQgVGhlIGNvdW50cnkgb2JqZWN0LlxuICAgICAqL1xuICAgIHZhciBvbk1vdXNlbW92ZSA9IGZ1bmN0aW9uIChldmVudCwgZCkge1xuICAgICAgdmFyIHRvb2x0aXBSZWN0ID0gZDNcbiAgICAgICAgLnNlbGVjdChcIi5qcy1tYXAtdG9vbHRpcFwiKVxuICAgICAgICAubm9kZSgpXG4gICAgICAgIC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciB0b29sdGlwSGVpZ2h0ID0gdG9vbHRpcFJlY3QuaGVpZ2h0O1xuICAgICAgdmFyIHRvb2x0aXBXaWR0aCA9IHRvb2x0aXBSZWN0LndpZHRoO1xuXG4gICAgICAvLyBQb3NpdGlvbiBhYm92ZSB0aGUgY3Vyc29yOlxuICAgICAgdG9vbHRpcFxuICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgZXZlbnQucGFnZVkgLSAodG9vbHRpcEhlaWdodCArIDcpICsgXCJweFwiKVxuICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsIGV2ZW50LnBhZ2VYIC0gdG9vbHRpcFdpZHRoIC8gMiArIFwicHhcIik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJzb3IgaGFzIGxlZnQgYSBjb3VudHJ5IC0gaGlkZSB0aGUgdG9vbHRpcC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkIFRoZSBjb3VudHJ5IG9iamVjdC5cbiAgICAgKi9cbiAgICB2YXIgb25Nb3VzZW91dCA9IGZ1bmN0aW9uIChldmVudCwgZCkge1xuICAgICAgdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29udGVudCBvZiB0aGUgdG9vbHRpcC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZCBUaGUgY291bnRyeSBvYmplY3QuXG4gICAgICogQHJldHVybnMgc3RyaW5nIEhUTUwgZm9yIHRoZSB0b29sdGlwLlxuICAgICAqL1xuICAgIHZhciB0b29sdGlwRm9ybWF0ID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgIGxldCBuYW1lID0gZ2V0Q291bnRyeVByb3AoZCwgXCJuYW1lXCIpO1xuICAgICAgbGV0IGh0bWwgPSAnJztcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGh0bWwgPSBcIjxzdHJvbmc+XCIgKyBnZXRDb3VudHJ5UHJvcChkLCBcIm5hbWVcIikgKyBcIjwvc3Ryb25nPlwiO1xuICAgICAgfVxuICAgICAgLy8gdGV4dCArPSBcIjxicj5Db21taXR0ZWQgY2VudHJhbDogXCIgKyBnZXRDb3VudHJ5UHJvcChkLCBcImNvbW1pdHRlZF9jZW50cmFsXCIpO1xuICAgICAgLy8gdGV4dCArPSBcIjxicj5Db21taXR0ZWQgcHVibGljOiBcIiArIGdldENvdW50cnlQcm9wKGQsIFwiY29tbWl0dGVkX3B1YmxpY1wiKTtcbiAgICAgIC8vIHRleHQgKz0gXCI8YnI+SW1wbGVtZW50YXRpb24gY2VudHJhbDogXCIgKyBnZXRDb3VudHJ5UHJvcChkLCBcImltcGxlbWVudGF0aW9uX2NlbnRyYWxcIik7XG4gICAgICAvLyB0ZXh0ICs9IFwiPGJyPkltcGxlbWVudGF0aW9uIHB1YmxpYzogXCIgKyBnZXRDb3VudHJ5UHJvcChkLCBcImltcGxlbWVudGF0aW9uX3B1YmxpY1wiKTtcbiAgICAgIHJldHVybiBodG1sO1xuICAgIH07XG5cbiAgLyoqXG4gICAqIEdldCBhIHByb3BlcnR5IGFib3V0IGEgY291bnRyeSBmcm9tIGl0cyBwYXRoIGVsZW1lbnQuXG4gICAqXG4gICAqIFdlIHVzZSB0aGUgZGF0YSB0aGF0J3MgcGFzc2VkIGluIGZyb20gdGhlIGJhY2sgZW5kLCB0aGF0J3Mgbm93IGluXG4gICAqIHRoZSBtYXBEYXRhIG9iamVjdC4gV2UgbmVlZCB0aGUgdHdvLWxldHRlciBJU08gdmFsdWUgZnJvbSB0aGUgZDMgZWxlbWVudFxuICAgKiB0byBmaW5kIHRoZSByaWdodCBkYXRhIGluIHRoZSBtYXBEYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGQgVGhlIGQzIGVsZW1lbnQgdGhhdCdzIGJlZW4gY2xpY2tlZCwgaG92ZXJlZCBvdmVyLCBldGMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIG5hbWUgb2YgYSBwaWVjZSBvZiBpbmZvIGxpa2UgJ25hbWUnLCAndXJsJywgaW1wbGVtZW50YXRpb25fY2VudHJhbCcsIGV0Yy5cbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICB2YXIgZ2V0Q291bnRyeVByb3AgPSBmdW5jdGlvbiAoZCwga2V5KSB7XG4gICAgbGV0IGlzbyA9IGQucHJvcGVydGllcy5pc29fYTI7XG4gICAgaWYgKGlzbyBpbiBtYXBEYXRhKSB7XG4gICAgICBpZiAoa2V5IGluIG1hcERhdGFbaXNvXSkge1xuICAgICAgICByZXR1cm4gbWFwRGF0YVtpc29dW2tleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiTm8gJ1wiICsga2V5ICtcIicgcHJvcGVydHkgZm91bmQgaW4gbWFwRGF0YSBmb3IgSVNPICdcIiArIGlzbyArIFwiJ1wiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiTm8gaXNvX2EyIHZhbHVlIGZvdW5kIGZvciBcIiArIGQucHJvcGVydGllcy5uYW1lICsgXCIgd2hlbiBsb29raW5nIGZvciBcIiArIGtleVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBjbGFzc2VzIHRvIGNvdW50cmllcyBiYXNlZCBvbiB3aGV0aGVyIHRoZXkndmUgY29tbWl0dGVkL2ltcGxlbWVudGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5fSBraW5kcyBBbiBhcnJheSBvZiBzdHJpbmdzIGxpa2VcbiAgICogIFtcImNvbW1pdHRlZC1jZW50cmFsXCIsIFwiY29tbWl0dGVkLXB1YmxpY1wiXVxuICAgKiAgSWYgaXQncyBhbiBlbXB0eSBhcnJheSB0aGVuIGFsbCBoaWxpdGUgY2xhc3NlcyB3aWxsIGJlIHJlbW92ZWQuXG4gICAqL1xuICB2YXIgaGlsaXRlQ291bnRyaWVzID0gZnVuY3Rpb24oa2luZHMpIHtcbiAgICAvLyBUdXJuIG9mZiBhbnkgZXhpc3RpbmcgaGlsaXRpbmc6XG4gICAgZDMuc2VsZWN0QWxsKFwiLmpzLW1hcC1jb3VudHJ5Lm1hcF9faGlsaXRlLWNlbnRyYWxcIikuY2xhc3NlZChcIm1hcF9faGlsaXRlLWNlbnRyYWxcIiwgZmFsc2UpO1xuICAgIGQzLnNlbGVjdEFsbChcIi5qcy1tYXAtY291bnRyeS5tYXBfX2hpbGl0ZS1wdWJsaWNcIikuY2xhc3NlZChcIm1hcF9faGlsaXRlLXB1YmxpY1wiLCBmYWxzZSk7XG5cbiAgICAvLyBIaWxpdGUgdGhpcyBraW5kIG9mIGNvdW50cnk6XG4gICAgZm9yICh2YXIgaT0wOyBpPGtpbmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2xzcyA9IFwibWFwX19oaWxpdGUtY2VudHJhbFwiO1xuICAgICAgaWYgKGtpbmRzW2ldLmVuZHNXaXRoKFwicHVibGljXCIpKSB7XG4gICAgICAgIGNsc3MgPSBcIm1hcF9faGlsaXRlLXB1YmxpY1wiO1xuICAgICAgfVxuICAgICAgZDMuc2VsZWN0QWxsKFwiLmpzLW1hcC1cIiArIGtpbmRzW2ldKS5jbGFzc2VkKGNsc3MsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwdWJsaWNBUElzO1xufSkoKTtcblxuXG5cbi8vIEVuc3VyZSB3ZSBoYXZlIGV2ZXJ5dGhpbmcgcmVxdWlyZWQgYmVmb3JlIGluaXRpYWxpc2luZzpcbmlmIChcbiAgdHlwZW9mIGQzICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2YgZ2VvanNvblBhdGggIT09ICd1bmRlZmluZWQnICYmXG4gIHR5cGVvZiBtYXBEYXRhICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2Ygb29FbmdhZ2VkVmFsdWVzICE9PSAndW5kZWZpbmVkJyAmJlxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG1hcFNlbGVjdG9yKS5sZW5ndGhcbikge1xuICB3b3JsZE1hcC5pbml0KHtcbiAgICBtYXBTZWxlY3RvcjogbWFwU2VsZWN0b3IsXG4gICAgbWFwRGF0YTogbWFwRGF0YSxcbiAgICBnZW9qc29uUGF0aDogZ2VvanNvblBhdGgsXG4gICAgb29FbmdhZ2VkVmFsdWVzOiBvb0VuZ2FnZWRWYWx1ZXNcbiAgfSk7XG59XG4iLCJ2YXIgc2Vjb25kYXJ5TGV2ZWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLi0tbGV2ZWwtdHdvJyk7XG5cbnNlY29uZGFyeUxldmVsQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uKGJ1dHRvbikge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGxldCBzdWJtZW51ID0gYnV0dG9uLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgdmFyIHBhcmVudExpID0gYnV0dG9uLnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHN1Ym1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdWJuYXYtLWhpZGRlbicpKSB7XG4gICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKTtcbiAgICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ3N1Ym5hdi0taGlkZGVuJyk7XG4gICAgICAgICAgcGFyZW50TGkuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5hZGQoJ3N1Ym5hdi0taGlkZGVuJyk7IFxuICAgICAgICAgIHBhcmVudExpLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJyk7XG4gICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpO1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG59KTtcblxudmFyIGZpcnN0TGV2ZWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLi0tbGV2ZWwtb25lJyk7XG5cbmZpcnN0TGV2ZWxCdXR0b25zLmZvckVhY2goZnVuY3Rpb24oYnV0dG9uKSB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgbGV0IHN1Ym1lbnUgPSBidXR0b24ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB2YXIgcGFyZW50TGkgPSBidXR0b24ucGFyZW50RWxlbWVudDtcbiAgXG4gICAgICAgIGlmIChzdWJtZW51LmNsYXNzTGlzdC5jb250YWlucygnc3VibmF2LS1oaWRkZW4nKSkge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJyk7XG4gICAgICAgICAgc3VibWVudS5jbGFzc0xpc3QucmVtb3ZlKCdzdWJuYXYtLWhpZGRlbicpO1xuICAgICAgICAgIHBhcmVudExpLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VibWVudS5jbGFzc0xpc3QuYWRkKCdzdWJuYXYtLWhpZGRlbicpOyBcbiAgICAgICAgICBwYXJlbnRMaS5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpO1xuICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKTtcbiAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxufSk7XG5cbnZhciBtb2JpbGVUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbl9fdG9nZ2xlJyk7XG5cbm1vYmlsZVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIGxldCBtYWluTWVudSA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xuICBpZiAobWFpbk1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCctLWhpZGRlbicpKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKTtcbiAgICBtYWluTWVudS5jbGFzc0xpc3QucmVtb3ZlKCctLWhpZGRlbicpO1xuICB9IGVsc2Uge1xuICAgIG1haW5NZW51LmNsYXNzTGlzdC5hZGQoJy0taGlkZGVuJyk7IFxuICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICB9XG59KTtcblxuIiwidmFyIHJlcG9ydENvbnRlbnRzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcG9ydC1jb250ZW50cycpO1xuaWYgKHJlcG9ydENvbnRlbnRzQnV0dG9uKSB7XG5cbiAgICB2YXIgbGVmdE1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1tZW51Jyk7XG5cbiAgICByZXBvcnRDb250ZW50c0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgXG4gICAgICAgIHJlcG9ydENvbnRlbnRzQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2V4cGFuZGVkJyk7XG4gICAgICAgIGxlZnRNZW51LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXBvcnRDb250ZW50c0J1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgICAgIHJlcG9ydENvbnRlbnRzQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXBvcnRDb250ZW50c0J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG4gICAgICAgICBcbiAgICAgICAgfVxuICAgIH0pOyBcbn1cblxuIiwidmFyIHNoYXJlUGFnZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZS1wYWdlJyk7XG52YXIgc2hhcmVQYWdlTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hhcmUtcGFnZS1saW5rcycpO1xuXG5pZiAoc2hhcmVQYWdlQnV0dG9uKSB7XG4gICAgc2hhcmVQYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBcbiAgICAgICAgc2hhcmVQYWdlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2V4cGFuZGVkJyk7XG4gICAgXG4gICAgICAgIHNoYXJlUGFnZUxpbmtzLmNsYXNzTGlzdC50b2dnbGUoJ2NvbGxhcHNlZCcpO1xuICAgIFxuICAgICAgICBpZiAoc2hhcmVQYWdlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkge1xuICAgICAgICAgICAgc2hhcmVQYWdlQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaGFyZVBhZ2VCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpO1xuICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9KTsgXG59XG5cbiIsIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcXFxuICAjQ1NTXG5cXCotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgJy4uL2Nzcy9tYWluLmNzcyc7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QucmVtb3ZlKCduby1qcycpO1xuXG5pbXBvcnQgJy4vY29tcG9uZW50cy9zaGFyZS1wYWdlLmpzJztcbmltcG9ydCAnLi9jb21wb25lbnRzL2dsb3NzYXJ5LmpzJztcbmltcG9ydCAnLi9jb21wb25lbnRzL25hdmlnYXRpb24uanMnO1xuXG5pbXBvcnQgJy4vY29tcG9uZW50cy9tYXAuanMnO1xuXG5pbXBvcnQgJy4vY29tcG9uZW50cy9jb3VudHJ5LWF1dG9jb21wbGV0ZS5qcyc7XG5cbmltcG9ydCAnLi9jb21wb25lbnRzL3JlcG9ydC1jb250ZW50cy1idXR0b24uanMnO1xuIl0sIm5hbWVzIjpbImZpbmRNYXRjaGVzIiwia2V5d29yZCIsImNvdW50cmllcyIsImZpbHRlciIsImNvdW50cnkiLCJyZWdleCIsIlJlZ0V4cCIsIm5hbWUiLCJtYXRjaCIsImRpc3BsYXlNYXRjaGVzIiwiY291bnRyeURhdGEiLCJ2YWx1ZSIsImxlbmd0aCIsInN1Z2dlc3Rpb25zIiwiaW5uZXJIVE1MIiwibWF0Y2hBcnJheSIsImh0bWwiLCJtYXAiLCJ1cmwiLCJqb2luIiwic2VhcmNoSW5wdXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiYWNjb3JkaW9uQnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhY2NvcmRpb25TZWN0aW9ucyIsImZvckVhY2giLCJzZWN0aW9uIiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYnV0dG9uIiwiZXhwYW5kZWQiLCJnZXRBdHRyaWJ1dGUiLCJudW1iZXIiLCJzcGxpdCIsInBvcCIsImFzc29jaWF0ZWRTZWN0aW9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGUiLCJjb250YWlucyIsIm1hcFNlbGVjdG9yIiwid29ybGRNYXAiLCJwdWJsaWNBUElzIiwibWFwRGF0YSIsIm9vRW5nYWdlZFZhbHVlcyIsImNvbnRhaW5lciIsInByb2plY3Rpb24iLCJzdmciLCJ3aWR0aCIsImhlaWdodCIsInBhdGgiLCJ0b29sdGlwIiwiaW5pdCIsIm9wdGlvbnMiLCJkMyIsInNlbGVjdCIsImluaXRNYXBEYXRhIiwiaW5pdE1hcCIsImluaXRUb29sdGlwIiwiaW5pdExpc3RlbmVycyIsImpzb24iLCJnZW9qc29uUGF0aCIsInRoZW4iLCJnZW9qc29uRGF0YSIsImdlbmVyYXRlTWFwIiwic2V0QWN0aXZlQnV0dG9uIiwiZGF0YSIsImkiLCJpc28yIiwicGFyc2VJbnQiLCJzdHlsZSIsImFwcGVuZCIsImF0dHIiLCJnZW9NZXJjYXRvciIsInRyYW5zbGF0ZSIsInNjYWxlIiwiY2VudGVyIiwiZ2VvUGF0aCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjbGFzc2VkIiwiZXZlbnQiLCJ0YXJnZXQiLCJtYXRjaGVzIiwib24iLCJkIiwiYnRuRWwiLCJlbCIsInBhcmVudENvbnRhaW5lciIsInBhcmVudEVsZW1lbnQiLCJhZGQiLCJmaWx0ZXJzIiwiaGlsaXRlQ291bnRyaWVzIiwic2VsZWN0QWxsIiwiZmVhdHVyZXMiLCJlbnRlciIsImNscyIsImdldENvdW50cnlQcm9wIiwib25DbGljayIsIm9uTW91c2VvdmVyIiwib25Nb3VzZW1vdmUiLCJvbk1vdXNlb3V0Iiwiem9vbSIsImNpcmNsZXMiLCJpc28iLCJsb24iLCJpbmRleE9mIiwib29fc3VwcG9ydCIsInB1c2giLCJwYXJzZUZsb2F0IiwibGF0Iiwic2NhbGVFeHRlbnQiLCJ0cmFuc2Zvcm0iLCJjYWxsIiwib25ab29tQ2xpY2siLCJ6b29tTGV2ZWwiLCJ0cmFuc2l0aW9uIiwiZGVsYXkiLCJkdXJhdGlvbiIsInNjYWxlQnkiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInRvb2x0aXBGb3JtYXQiLCJ0b29sdGlwUmVjdCIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b29sdGlwSGVpZ2h0IiwidG9vbHRpcFdpZHRoIiwicGFnZVkiLCJwYWdlWCIsImtleSIsInByb3BlcnRpZXMiLCJpc29fYTIiLCJjb25zb2xlIiwiZXJyb3IiLCJraW5kcyIsImNsc3MiLCJlbmRzV2l0aCIsInNlY29uZGFyeUxldmVsQnV0dG9ucyIsInN1Ym1lbnUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJwYXJlbnRMaSIsImZpcnN0TGV2ZWxCdXR0b25zIiwibW9iaWxlVG9nZ2xlIiwibWFpbk1lbnUiLCJyZXBvcnRDb250ZW50c0J1dHRvbiIsImxlZnRNZW51Iiwic2hhcmVQYWdlQnV0dG9uIiwic2hhcmVQYWdlTGlua3MiXSwic291cmNlUm9vdCI6IiJ9