{#

Available vars:

For all nav items:
    href - Nav item url
    label - Nav item name

For mega menu containing nav items:
    obj.text - Main text link for mega menu
    item.section_title - Section title for group of links

#}


<div class="navbar">
    <div class="contained-width navbar__wrapper">
        {% include 'svg/logo_black.jinja' %}

        <div class="navbar__navigations-container">
            {# <nav class="navbar__language" aria-label="Language">
                <ul>
                    <li><a href="">English</a></li>
                    <li><a href="">Portuguese</a></li>
                </ul>
            </nav>#}

            {% if page.translations %}
            <nav class="navbar__language" aria-label="Language">
                <ul>
                    {% for item in page.translations %}
                        <li><a href="{{item.url}}">{{ item.language }}</a></li>
                    {% endfor %}
                </ul>
            </nav>
            {% endif %}

            <nav class="navbar__main-navigation" aria-label="Main navigation">
                <ul class="navigation__level-one">
                    {% for obj in navbar_blocks recursive %}
                        {% if obj.type == 'nav_item' %}
                            {# "Home" #}
                            {% set href, label = obj.value %}
                            <li class="navigation__level-two"{% if obj.value.page == page.section_page %} aria-current="page"{% endif %}>
                                <a href="{{href}}">{{label}}</a></li>
                        {% elif obj.type == 'mega_menu' %}
                            {# "About" #}
                            {% set href, label = obj.link %}
                            <li class="navigation__level-two"{% if obj.page == page.section_page %} aria-current="page"{% endif %}>
                                <a href="{{href}}">{{label}}</a></li>

                            {% for item in obj.objects %}
                                {# "Open Ownership Team" #}
                                {% set href, label = item.link %}
                                <li class="navigation__level-three"{% if item.page and item.page.pk == page.pk %} aria-current="page"{% endif %}>
                                    <a href="{{href}}">{{label}}</a></li>

                                {% if item.type == 'sub_menu' %}
                                    {# level-four: Team members #}
                                    {% for sub_item in item.objects %}
                                        {% set href, label = sub_item.link %}
                                        <li class="navigation__level-four"{% if sub_item.page and sub_item.page.pk == page.pk %} aria-current="page"{% endif %}>
                                            <a href="{{href}}">{{label}}</a></li>
                                    {% endfor %}
                                {% endif %}

                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </ul>
            </nav>
        </div>
    </div>
</div>
