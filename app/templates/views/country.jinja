{% set body_classes = "country-page" %}
{% extends 'base_with_menu.jinja' %}

{% block content %}

<article>
    <div class="country-page__overview">
        {% if country.map_image %}
        <div class="country-page__map">
            {{ picture(country.map_image, 300, 194) }}
        </div>
        {% endif %}

        <div class="country-page__details">
            <p><strong>Records last updated: {{ country.notion_updated|nicedate }}</strong></p>
            
            {% if country.consultant %}
                <p>
                    <strong>
                        {% trans %}Consultant's details:{% endtrans %}
                    </strong>
                    <a href="{{ country.consultant.url }}">
                        {{ country.consultant.title }}
                    </a>
                </p>
            {% endif %}
        </div>
    </div>

    <div class="country-page__country-data">

        <div class="country-page__country-data-box">
            <h2 class="country-page__country-data-box-header">
                {% include "svg/commitment-icon.jinja" %}
                {% trans %}Commitment to BOT{% endtrans %}
            </h2>

            <ul class="country-page__country-data-box-list">
                <li class="country-page__country-data-box-list-item">
                    {% if checkbox(country.committed_central) == 'YES' %}
                        {% include "svg/confirm-icon.jinja" %}
                    {% else %}
                        {% include "svg/not-confirm-icon.jinja" %}
                    {% endif %}
                    
                    {% trans %}Central Register{% endtrans %}
                </li>

                <li  class="country-page__country-data-box-list-item">
                    {% if checkbox(country.committed_public) == 'YES' %}
                        {% include "svg/confirm-icon.jinja" %}
                    {% else %}
                        {% include "svg/not-confirm-icon.jinja" %}
                    {% endif %}
                    {% trans %}Public Register{% endtrans %}
                </li>
            </ul>
        </div>

        <div class="country-page__country-data-box">
            <h2 class="country-page__country-data-box-header">
                {% include "svg/implementation-icon.jinja" %}
                {% trans %}Implementation of BOT{% endtrans %}
            </h2>

            <ul class="country-page__country-data-box-list">
                <li class="country-page__country-data-box-list-item">
                    {% if checkbox(country.implementation_central) == 'YES' %}
                        {% include "svg/confirm-icon.jinja" %}
                    {% else %}
                        {% include "svg/not-confirm-icon.jinja" %}
                    {% endif %}
                    
                    {% trans %}Central register: Open Ownership register{% endtrans %}
                </li>

                <li  class="country-page__country-data-box-list-item">
                    {% if checkbox(country.implementation_public) == 'YES' %}
                        {% include "svg/confirm-icon.jinja" %}
                    {% else %}
                        {% include "svg/not-confirm-icon.jinja" %}
                    {% endif %}
                    {% trans %}Public register: UK PSC Register{% endtrans %}
                </li>
            </ul>
        </div>
    </div>

    <a href="#" class="ghost-link">{% trans %}Download Country Data{% endtrans %}</a>

    <div class="country-page__content">
        <section class="country-page__section">
            <h2>{% trans %}Commitment Detail{% endtrans %}</h2>

            <ul>
                {% for commitment in country.commitments.all() %}
                <li>
                    {{ commitment_summary(commitment.commitment_type_name, country) }} [{{ commitment.date|nicedate }}]
                    {% if commitment.link %}<a href="{{ commitment.link }}">link to commitment</a>{% endif %}
                </li>
                {% endfor %}
            </ul>
            
        </section>

        <section class="country-page__section">
           
            <h2>{% trans %}Implementation Detail{% endtrans %}</h2>
            {% for regime in country.disclosure_regimes.all() %}
                <p>{{ regime.title }}</p>
            {% endfor %}

            <details>
                <summary>{% trans %}Show further detail{% endtrans %}</summary>
                <div class="implementation-details">
                    <dl>
                        <dt>{% trans %}Central register implemented{% endtrans %}</dt>
                        <dd>{{ country.regime.central_register }}</dd>
                        <dt>{% trans %}Public access{% endtrans %}</dt>
                        <dd>{{ country.regime.public_access }}</dd>
                        <dt>{% trans %}Scope{% endtrans %}</dt>
                        <dd>{{ country.regime.coverage_scope }}</dd>
                        <dt>{% trans %}Register launched{% endtrans %}</dt>
                        <dd>{{ country.regime.year_launched }}</dd>
                        <dt>{% trans %}Structured data publicly available{% endtrans %}</dt>
                        <dd>{{ country.regime.data_in_bods }}</dd>
                        <dt>{% trans %}Available via API{% endtrans %}</dt>
                        <dd>{{ country.regime.api_available }}</dd>
                        <dt>{% trans %}Available on the OO register{% endtrans %}</dt>
                        <dd>{{ country.regime.on_oo_register }}</dd>
                    </dl>
                </div>
            </details>
        </section>

        {# This section will come post-launch #}
        {# <section>
            <hr/>
            <h2>{% trans %}Legislation Detail{% endtrans %}</h2>
        </section> #}
    </div>

</article>


{% set related_pages = country.latest_related(3) %}
{% if related_pages|length %}
<section>
    <hr/>
    <h2>{% trans %}Relevant articles and publications{% endtrans %}</h2>
    {% with pages=related_pages, columns=1 %}
        {% include "_partials/card_group.jinja" %}
    {% endwith %}
</section>
{% endif %}


{{ super() }}

{% endblock %}
