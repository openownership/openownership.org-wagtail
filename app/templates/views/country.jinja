{% set body_classes = "country-page" %}
{% extends 'base_with_menu.jinja' %}

{% block content %}

    <div class="country__header">
        {% if country.map_image %}
            <div class="country__header-map">
                {{ picture(country.map_image, 300, 194) }}
            </div>
        {% endif %}
        <div class="country__header-meta">
            <p>Records last updated: {{ country.notion_updated|nicedate }}</p>
            {% if country.consultant %}<p>{% trans %}Consultant's details:{% endtrans %}
                <a href="{{ country.consultant.url }}">{{ country.consultant.title }}</a>
            {% endif %}
        </div>
        <div class="grid-cols grid--2-col">
            <div class="country__header-card">
                <span class="country__header-card_header">{% trans %}Commitment to BOT{% endtrans %}</span>
                {# NOTE TO ANA: I've done this checkbox function here to render something on a bool value.
                    At the moment it just returns YES or NO, but you might want to have it return an svg or something.
                #}
                <span class="country__header-card_row">{{ checkbox(country.committed_central) }}{% trans %}Central Register{% endtrans %}</span>
                <span class="country__header-card_row">{{ checkbox(country.committed_public) }}{% trans %}Public Register{% endtrans %}</span>
            </div>

            <div class="country__header-card">
                <span class="country__header-card_header">{% trans %}Implementation of BOT{% endtrans %}</span>
                {# NOTE TO ANA: I've done this checkbox function here to render something on a bool value.
                    At the moment it just returns YES or NO, but you might want to have it return an svg or something.
                #}
                <span class="country__header-card_row">{{ checkbox(country.implementation_central) }}{% trans %}Central register: Open Ownership register{% endtrans %}</span>
                <span class="country__header-card_row">{{ checkbox(country.implementation_public) }}{% trans %}Public register: UK PSC Register{% endtrans %}</span>
            </div>
        </div>

        <a href="#" class="button">{% trans %}Download Country Data{% endtrans %}</a>
    </div>

<section>
    <hr/>
    <h2>{% trans %}Commitment Detail{% endtrans %}</h2>
    {% for commitment in country.commitments.all() %}
        <p>{{ commitment_summary(commitment.commitment_type_name, country) }} [{{ commitment.date|nicedate }}]
            {% if commitment.link %}<a href="{{ commitment.link }}">link to commitment</a>{% endif %}</p>
    {% endfor %}
</section>

<section>
    <hr/>
    <h2>{% trans %}Implementation Detail{% endtrans %}</h2>
    {% for regime in country.disclosure_regimes.all() %}
        <p>{{ regime.title }}</p>
    {% endfor %}

    <details>
        <summary>{% trans %}Central register implemented{% endtrans %}</summary>
        {{ country.regime.central_register }}
    </details>

    <details>
        <summary>{% trans %}Public access{% endtrans %}</summary>
        {{ country.regime.public_access }}
    </details>

    <details>
        <summary>{% trans %}Scope{% endtrans %}</summary>
        {{ country.regime.coverage_scope }}
    </details>
    <details>
        <summary>{% trans %}Register launched{% endtrans %}</summary>
        {{ country.regime.year_launched }}
    </details>
    <details>
        <summary>{% trans %}Structured data publicly available{% endtrans %}</summary>
        {{ country.regime.data_in_bods }}
    </details>
    <details>
        <summary>{% trans %}Available via API{% endtrans %}</summary>
        {{ country.regime.api_available }}
    </details>
    <details>
        <summary>{% trans %}Available on the OO register{% endtrans %}</summary>
        {{ country.regime.on_oo_register }}
    </details>
</section>

{# This section will come post-launch #}
{# <section>
    <hr/>
    <h2>{% trans %}Legislation Detail{% endtrans %}</h2>
</section> #}

{% set related_pages = country.latest_related(3) %}
{% if related_pages|length %}
<section>
    <hr/>
    <h2>{% trans %}Relevant articles and publications{% endtrans %}</h2>
    {% with pages=related_pages, columns=1 %}
        {% include "_partials/card_group.jinja" %}
    {% endwith %}
</section>
{% endif %}


    {{ super() }}

{% endblock %}
